<!DOCTYPE html>
<html>
<head>
    <title>Test Date Boundary Logic</title>
</head>
<body>
    <h1>Date Boundary Logic Test</h1>
    <div id="results"></div>

    <script>
        function testDateLogic() {
            const now = new Date();
            
            // OLD (broken) logic
            const oldTodayUTC = new Date(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate());
            const oldTomorrowUTC = new Date(oldTodayUTC);
            oldTomorrowUTC.setUTCDate(oldTomorrowUTC.getUTCDate() + 1);
            
            // NEW (fixed) logic
            const newTodayUTC = new Date(Date.UTC(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate()));
            const newTomorrowUTC = new Date(newTodayUTC);
            newTomorrowUTC.setUTCDate(newTomorrowUTC.getUTCDate() + 1);
            
            const results = `
                <h2>Current Time Info:</h2>
                <p><strong>Local Now:</strong> ${now.toString()}</p>
                <p><strong>UTC Now:</strong> ${now.toISOString()}</p>
                <p><strong>Current UTC Date:</strong> ${now.toISOString().split('T')[0]}</p>
                <p><strong>Timezone Offset (minutes):</strong> ${now.getTimezoneOffset()}</p>
                
                <h2>OLD (Broken) Logic:</h2>
                <p><strong>Today Start:</strong> ${oldTodayUTC.toISOString()}</p>
                <p><strong>Tomorrow Start:</strong> ${oldTomorrowUTC.toISOString()}</p>
                <p><strong>Date from Today Start:</strong> ${oldTodayUTC.toISOString().split('T')[0]}</p>
                
                <h2>NEW (Fixed) Logic:</h2>
                <p><strong>Today Start:</strong> ${newTodayUTC.toISOString()}</p>
                <p><strong>Tomorrow Start:</strong> ${newTomorrowUTC.toISOString()}</p>
                <p><strong>Date from Today Start:</strong> ${newTodayUTC.toISOString().split('T')[0]}</p>
                
                <h2>Comparison:</h2>
                <p><strong>Old vs Current UTC Date Match:</strong> ${oldTodayUTC.toISOString().split('T')[0] === now.toISOString().split('T')[0] ? '✅ CORRECT' : '❌ WRONG'}</p>
                <p><strong>New vs Current UTC Date Match:</strong> ${newTodayUTC.toISOString().split('T')[0] === now.toISOString().split('T')[0] ? '✅ CORRECT' : '❌ WRONG'}</p>
            `;
            
            document.getElementById('results').innerHTML = results;
        }
        
        testDateLogic();
    </script>
</body>
</html>
